<template>
    <title data-next-head="">Lecoinbon</title>
    <link rel="stylesheet" href="./index_files/97fb0f855f600656.css" data-n-p="">
    <meta charset="utf-8" data-next-head="">
  <body data-theme="private" class="font-sans didomi-popup-open">
    <div id="__next">
      <div data-test-id="main-layout-container" id="container" data-pagename="homepage">
        <div class="relative flex bg-transparent tiny:bg-background">
          <div class="flex size-full flex-col">
            <div data-test-id="layout-content" class="flex max-w-full flex-1 flex-col min-h-screen">
              <div class="">
                <header role="banner" class="visible relative z-sticky border-b-sm border-b-outline px-[max(var(--spacing-lg),calc((100%-var(--page-max))/2))] transition-colors duration-250 after:fixed after:inset-none after:z-hide after:bg-overlay/dim-3 after:pointer-events-none after:select-none after:opacity-0 after:transition-opacity after:duration-250 sticky top-none !px-none">
                  <div class="pointer-events-none absolute overflow-hidden inset-x-none -bottom-md top-[-1px] before:absolute before:inset-x-none before:bottom-md before:top-none after:absolute after:inset-x-none after:bottom-md after:top-none after:bg-surface"></div>
                  <div class="relative flex min-h-[6rem] flex-wrap items-center justify-between gap-x-md bg-surface">
                    <div class="flex w-full flex-wrap items-center justify-between px-[max(var(--spacing-lg),calc((100%-var(--page-max))/2))]">
                      <div class="flex custom:hidden mr-lg">
                        <nav role="navigation" aria-label="Menu principal">
                          <button class="relative py-sm" title="Ouvrir le menu principal" aria-expanded="false">
                            <svg viewBox="0 0 24 24" data-title="BurgerMenu" fill="currentColor" stroke="none" class="fill-current shrink-0 text-support w-sz-32 h-sz-32" data-spark-component="icon" aria-hidden="true" focusable="false">
                              <path fill-rule="evenodd" d="m2,5.12c0-.62.45-1.12,1-1.12h18c.55,0,1,.5,1,1.12s-.45,1.12-1,1.12H3c-.55,0-1-.5-1-1.12Zm0,6.88c0-.62.45-1.12,1-1.12h18c.55,0,1,.5,1,1.12s-.45,1.12-1,1.12H3c-.55,0-1-.5-1-1.12Zm0,6.88c0-.62.45-1.12,1-1.12h18c.55,0,1,.5,1,1.12s-.45,1.12-1,1.12H3c-.55,0-1-.5-1-1.12Z"></path>
                            </svg>
                          </button>
                        </nav>
                      </div>
                      <div class="flex h-[--headerHeight] flex-grow items-center justify-center custom:grow-0 lg:min-w-[181px] lg:justify-start" style="--headerHeight: 6rem">
                        <div class="mr-[calc(3rem+var(--spacing-lg))] overflow-hidden custom:mr-none custom:flex">
                          <div class="custom:visible custom:transform-none custom:opacity-none custom:transition-none visible opacity-none styles_movableLogo__3Am8s" style="
                              --embedAnimation: 175ms;
                              --shrinkAnimation: 75ms;
                              --shrinkEmbedAnimation: 250ms;
                            ">
                            <a title="Retour à la page d’accueil" class="flex h-[6rem] items-center" href="/"><img alt="Logo" width="181" height="31" decoding="async" data-nimg="1" class="h-[3rem] w-[inherit]" src="../lecoinbon.png"></a>
                          </div>
                        </div>
                      </div>
                      <div class="relative z-raised hidden custom:flex mx-lg flex-1">
                        <div data-test-id="children" class="whitespace-nowrap transitions_childrenWrapper__82rie max-w-full opacity-none" style="--extendAnimation: 350ms; max-width: 234px">
                          <div class="float-left pr-lg">
                            <a data-spark-component="button" class="u-shadow-border-transition box-border inline-flex items-center justify-center gap-md whitespace-nowrap px-lg text-body-1 font-bold focus-visible:outline-none focus-visible:u-ring [&amp;:not(:focus-visible)]:ring-inset min-w-sz-44 h-sz-44 rounded-lg bg-main text-on-main hover:bg-main-hovered enabled:active:bg-main-hovered focus-visible:bg-main-hovered" aria-busy="false" aria-live="off" href="/login"><svg viewBox="0 0 24 24" data-title="AddSquareOutline" fill="currentColor" stroke="none" class="fill-current shrink-0 text-current w-sz-16 h-sz-16" data-spark-component="icon" aria-hidden="true" focusable="false">
                                <path d="m12,6.84c.56,0,1.01.45,1.01,1.01v3.14h3.14c.56.02.99.5.96,1.05-.02.52-.44.94-.96.96h-3.14v3.14c0,.56-.45,1.01-1.01,1.01-.56,0-1.01-.45-1.01-1.01h0v-3.14h-3.14c-.56,0-1.01-.45-1.01-1.01,0-.56.45-1.01,1.01-1.01h3.14v-3.14c0-.56.45-1.01,1.01-1.01h0Z"></path>
                                <path fill-rule="evenodd" d="m7.16,2c-2.85,0-5.16,2.31-5.16,5.16h0v9.68c0,2.85,2.31,5.16,5.16,5.16h9.68c2.85,0,5.16-2.31,5.16-5.16V7.16c0-2.85-2.31-5.16-5.16-5.16H7.16Zm-3.14,5.16c0-1.73,1.4-3.14,3.14-3.14h9.68c1.73,0,3.14,1.4,3.14,3.14h0v9.68c0,1.73-1.4,3.14-3.14,3.14H7.16c-1.73,0-3.14-1.4-3.14-3.14h0V7.16h0Z"></path></svg>Déposer une annonce</a>
                          </div>
                        </div>
                        <div class="flex-1">
                          <div class="relative flex h-sz-44 w-full items-center rounded-lg border-none bg-neutral-container outline-none pl-lg pr-[var(--sz-48)] undefined">
                            <input maxlength="500" placeholder="Rechercher sur lecoinbon" class="absolute left-none top-none size-full rounded-[inherit] border-none bg-transparent px-[inherit] text-body-1 text-on-neutral-container placeholder:text-on-neutral-container" role="combobox" id="b7eebb03-6895-4d59-9803-7c3ce66ed6b0-input" autocomplete="off" autocapitalize="off" enterkeyhint="done" aria-autocomplete="list" aria-expanded="false" aria-haspopup="listbox" data-test-id="extendable-input" type="text"><button class="w-2xl h-2xl rounded-[1.2rem] absolute right-md flex items-center justify-center text-on-main bg-main hover:bg-main-hovered" title="Rechercher" aria-label="Rechercher">
                              <svg viewBox="0 0 24 24" data-title="Search" fill="currentColor" stroke="none" class="fill-current shrink-0 text-current w-sz-16 h-sz-16" data-spark-component="icon" aria-hidden="true" focusable="false">
                                <path fill-rule="evenodd" d="m10.5,3.95c-3.62,0-6.55,2.93-6.55,6.55s2.93,6.55,6.55,6.55,6.55-2.93,6.55-6.55-2.93-6.55-6.55-6.55ZM2,10.5C2,5.81,5.81,2,10.5,2s8.5,3.81,8.5,8.5-3.81,8.5-8.5,8.5S2,15.2,2,10.5Z"></path>
                                <path fill-rule="evenodd" d="m15.13,15.13c.38-.38,1-.38,1.38,0l5.21,5.21c.38.38.38,1,0,1.38-.38.38-1,.38-1.38,0l-5.21-5.21c-.38-.38-.38-1,0-1.38Z"></path>
                              </svg>
                            </button>
                            <div role="listbox" class="absolute inset-x-none top-[--topPosition]" style="--topPosition: 5.2rem">
                              <div data-test-id="popover-content" class="relative overflow-hidden rounded-lg bg-surface shadow max-h-[0]" style="--popoverAnimation: 350ms"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <a class="group relative flex items-center justify-center self-stretch px-md focus-visible:u-ring-inset flex-col gap-sm hidden custom:flex ml-auto" aria-label="Mes recherches" aria-current="false" href="/my-searches"><div class="relative inline-flex">
                          <div class="relative h-[2.4rem]">
                            <svg viewBox="0 0 24 24" data-title="AlarmOutline" fill="currentColor" stroke="none" data-test-id="icon" class="fill-current shrink-0 text-current w-sz-24 h-sz-24" data-spark-component="icon" aria-hidden="true" focusable="false">
                              <path fill-rule="evenodd" d="m14.1,4.03c1.05.34,2.02.92,2.81,1.72,1.3,1.31,2.03,3.08,2.03,4.93,0,2.8.47,4.35.96,5.25.39.72.58,1.6.26,2.39-.36.88-1.21,1.3-2.15,1.3h-2.94c-.18.69-.58,1.29-1.13,1.72-.56.43-1.24.66-1.95.66s-1.39-.23-1.95-.66c-.56-.43-.96-1.03-1.13-1.72h0s-2.94,0-2.94,0c-.95,0-1.79-.42-2.15-1.3-.32-.79-.13-1.67.26-2.39.49-.9.96-2.44.96-5.25,0-1.85.73-3.62,2.03-4.93.79-.8,1.76-1.38,2.81-1.72.04-1.13.97-2.03,2.1-2.03s2.06.9,2.1,2.03Zm-2.1,1.69c1.31,0,2.56.52,3.48,1.45.92.93,1.44,2.19,1.44,3.5,0,3.02.51,4.93,1.21,6.21.22.41.17.63.16.66h0s-.09.05-.28.05H5.98c-.18,0-.26-.04-.28-.05h0s-.06-.25.16-.66c.7-1.29,1.21-3.2,1.21-6.22,0-1.31.52-2.57,1.44-3.5.92-.93,2.18-1.45,3.48-1.45Z"></path>
                            </svg>
                          </div>
                          <span data-spark-component="badge" role="status" class="inline-flex h-fit empty:p-none text-center font-bold rounded-full box-content bg-main text-on-main border-surface text-small px-[var(--sz-6)] py-[var(--sz-2)] empty:size-sz-8 absolute right-none border-md translate-x-1/2 -translate-y-1/2 hidden absolute top-md"></span>
                        </div>
                        <span class="text-caption">Mes recherches</span>
                        <div data-test-id="active-indicator" class="absolute bottom-none block h-[0.3rem] bg-main transition-all duration-300 ease-out group-hover:w-full group-hover:opacity-none w-none opacity-0"></div></a><a class="group relative flex items-center justify-center self-stretch px-md focus-visible:u-ring-inset flex-col gap-sm hidden custom:flex" aria-label="Favoris" aria-current="false" href="/favorites"><div class="relative h-[2.4rem]">
                          <svg viewBox="0 0 24 24" data-title="LikeOutline" fill="currentColor" stroke="none" data-test-id="icon" class="fill-current shrink-0 text-current w-sz-24 h-sz-24" data-spark-component="icon" aria-hidden="true" focusable="false">
                            <path d="m16.28,3c-1.72,0-3.24.83-4.28,2.11-1.04-1.28-2.57-2.11-4.28-2.11-3.21,0-5.72,2.85-5.72,6.24,0,2.77,1.41,4.75,1.97,5.51,1.87,2.47,4.38,4.11,6.67,5.6h.02c.25.17.49.33.73.49.32.21.73.22,1.06.02.21-.13.43-.26.63-.39h.02c2.39-1.48,5.02-3.1,6.95-5.68.64-.86,1.95-2.83,1.95-5.54,0-3.4-2.51-6.23-5.72-6.23h0Zm-8.57,2.12c1.46,0,2.76.96,3.35,2.39.16.38.52.64.93.64s.77-.25.93-.64c.6-1.44,1.9-2.39,3.36-2.39,1.99,0,3.7,1.79,3.69,4.13,0,2-.98,3.5-1.52,4.24-1.67,2.25-3.98,3.67-6.43,5.19l-.07.04-.21-.13c-2.33-1.52-4.54-2.97-6.18-5.14-.51-.67-1.54-2.18-1.54-4.2,0-2.33,1.7-4.13,3.7-4.13h0Z"></path>
                          </svg>
                        </div>
                        <span class="text-caption">Favoris</span>
                        <div data-test-id="active-indicator" class="absolute bottom-none block h-[0.3rem] bg-main transition-all duration-300 ease-out group-hover:w-full group-hover:opacity-none w-none opacity-0"></div></a>
                        <a href="/login" class="group relative flex items-center justify-center self-stretch px-md focus-visible:u-ring-inset flex-col gap-sm hidden custom:flex !w-sz-96" aria-label="Connexion en cours" aria-current="false" type="button">
                        <div class="relative h-[2.4rem]">
                          <svg viewBox="0 0 24 24" data-title="AccountOutline" fill="currentColor" stroke="none" data-test-id="icon" class="fill-current shrink-0 text-current w-sz-24 h-sz-24" data-spark-component="icon" aria-hidden="true" focusable="false">
                            <path fill-rule="evenodd" d="m12,4.19c-1.6,0-2.93,1.26-2.93,2.84s1.33,2.84,2.93,2.84,2.93-1.26,2.93-2.84-1.33-2.84-2.93-2.84Zm-5.23,2.84c0-2.77,2.32-5.03,5.23-5.03s5.23,2.27,5.23,5.03-2.32,5.03-5.23,5.03-5.23-2.27-5.23-5.03Zm5.23,8.54c-1.85,0-3.63.71-4.95,1.98-1.01.97-1.68,2.21-1.94,3.55-.12.6-.72.99-1.34.88-.63-.11-1.04-.68-.92-1.28.34-1.76,1.23-3.4,2.56-4.69,1.74-1.68,4.11-2.63,6.59-2.63s4.84.95,6.59,2.63c1.34,1.29,2.22,2.93,2.56,4.69.12.6-.3,1.17-.92,1.28-.63.11-1.23-.28-1.34-.88-.26-1.34-.93-2.58-1.94-3.55-1.31-1.27-3.09-1.98-4.95-1.98Z"></path>
                          </svg>
                        </div>
                        <span class="text-caption">Login</span>
                        <div data-test-id="active-indicator" class="absolute bottom-none block h-[0.3rem] bg-main transition-all duration-300 ease-out group-hover:w-full group-hover:opacity-none w-none opacity-0"></div>
                      </a>
                      
                      <button @click="goToCart" class="group relative flex items-center justify-center self-stretch px-md focus-visible:u-ring-inset flex-col gap-sm hidden custom:flex !w-sz-96" aria-label="Connexion en cours" aria-current="false" type="button"><div class="relative h-[2.4rem]">🛒</div><span class="text-caption">Panier ({{ cartItemCount }})</span><div data-test-id="active-indicator" class="absolute bottom-none block h-[0.3rem] bg-main transition-all duration-300 ease-out group-hover:w-full group-hover:opacity-none w-none opacity-0"></div></button>
                      <div class="z-base flex-1 basis-full">
                        <nav aria-label="Menu des catégories">
                          <ul class="group/nav relative hidden h-[--navHeight] custom:flex" data-test-id="sticky-bar" style="--navHeight: 5rem">
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-none">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Immobilier" aria-controls="popover-Immobilier" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Immobilier">Immobilier</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Véhicules" aria-controls="popover-Véhicules" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Véhicules">Véhicules</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Locations de vacances" aria-controls="popover-Locations de vacances" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Locations de vacances">Locations de vacances</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Jeux" aria-controls="popover-Jeux" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Jeux">Jeux</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Mode" aria-controls="popover-Mode" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Mode">Mode</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Maison &amp; Jardin" aria-controls="popover-Maison &amp; Jardin" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Maison &amp; Jardin">Maison &amp; Jardin</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Famille" aria-controls="popover-Famille" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Famille">Famille</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Électronique" aria-controls="popover-Électronique" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Électronique">Électronique</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Loisirs" aria-controls="popover-Loisirs" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Loisirs">Loisirs</span>
                              </button>
                            </li>
                            <li aria-hidden="true" class="relative z-hide flex-1 bg-surface text-on-surface before:pointer-events-none before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:select-none before:font-bold before:content-['·'] first:hidden"></li>
                            <li class="flex pr-md last:pr-none pl-md">
                              <button class="relative after:absolute after:inset-x-none after:bottom-none after:z-raised after:scale-x-0 after:border-b-md after:border-outline-high group-hover/nav:after:scale-x-0 hover:after:!scale-x-100 hover:after:transition-all hover:after:duration-[--open-delay] !shadow-none before:hidden focus-visible:outline-none font-regular" aria-expanded="false" aria-label="Autres" aria-controls="popover-Autres" style="--open-delay: 300ms">
                                <span class="relative inline-flex h-full cursor-pointer flex-col items-center justify-center bg-surface align-middle text-body-2 text-on-surface before:pointer-events-none before:invisible before:h-none before:select-none before:overflow-hidden before:font-bold before:content-[attr(data-label)]" data-label="Autres">Autres</span>
                              </button>
                            </li>
                          </ul>
                        </nav>
                      </div>
                    </div>
                    <div data-test-id="search-overlay" class="pointer-events-none absolute inset-x-none bottom-none h-[5rem] select-none bg-overlay/dim-3 opacity-0 transition-opacity duration-250"></div>
                  </div>
                </header>
                <main id="mainContent">
                  <div></div>
                  <section class="relative [&amp;:has(#home-left-atf-60-xl.liberty-filled)]:min-h-[648px] [&amp;:has(#home-right-atf-60-xl.liberty-filled)]:min-h-[648px]">
                    <div class="w-[calc((100%-(theme(width.page-max)+(var(--spacing-xl)*2)))/2)] absolute inset-y-[0] z-dropdown left-[0]" id="skyscraper-container-left">
                      <div class="absolute top-[0] w-full bottom-[0]">
                        <div class="justify-end ease sticky flex max-h-full transform overflow-hidden duration-350 py-xl top-[110px]">
                          <div class="flex justify-end">
                            <div aria-label="" id="home-left-atf-60-xl" class="" data-liberty-position-name="home-left-atf-60"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="w-[calc((100%-(theme(width.page-max)+(var(--spacing-xl)*2)))/2)] absolute inset-y-[0] z-dropdown right-[0]" id="skyscraper-container-right">
                      <div class="absolute top-[0] w-full bottom-[0]">
                        <div class="justify-start ease sticky flex max-h-full transform overflow-hidden duration-350 py-xl top-[110px]">
                          <div class="flex justify-start">
                            <div aria-label="" id="home-right-atf-70-xl" class="" data-liberty-position-name="home-right-atf-70"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="mx-auto mb-none mt-xl box-content max-w-page-max px-lg md:px-xl">
                      <a class="relative mb-2xl min-h-[8rem] overflow-hidden p-lg flex items-center justify-center rounded-lg bg-main-container before:absolute before:inset-none before:z-base before:bg-left-bottom before:bg-no-repeat before:bg-[image:var(--leftOrnamentMobile)] before:bg-[length:auto_50%] tiny:before:bg-[length:auto_60%] sm:before:bg-[length:auto_80%] custom:before:bg-[length:auto_60%] lg:before:bg-[image:var(--leftOrnamentDesktop)] lg:before:bg-[length:auto_100%] after:absolute after:inset-none after:z-base after:bg-right-bottom after:bg-no-repeat after:bg-[image:var(--rightOrnamentMobile)] after:bg-[length:auto_60%] tiny:after:bg-[length:auto_70%] sm:after:bg-[length:auto_80%] lg:after:bg-[image:var(--rightOrnamentDesktop)] lg:after:bg-[length:auto_100%]" href="/login" style="
                          --leftOrnamentDesktop: url(&quot;/_next/static/media/left-ornament-desktop.4281d0cc.svg&quot;);
                          --leftOrnamentMobile: url(&quot;/_next/static/media/left-ornament-mobile.0c4bbe50.svg&quot;);
                          --rightOrnamentDesktop: url(&quot;/_next/static/media/right-ornament-desktop.cc3ef612.svg&quot;);
                          --rightOrnamentMobile: url(&quot;/_next/static/media/right-ornament-mobile.b8d75e7c.svg&quot;);
                        "><div class="relative z-raised flex flex-col items-center md:flex-row">
                        <link rel="stylesheet" href="http://www.lecoinbon.fr.000.pe/_next/static/css/19842df133a4d6ba.css" data-n-g="">
                          <p class="mb-md text-headline-1 md:mb-none md:mr-xl lg:mr-lg">
                            C’est le moment de vendre
                          </p>
                          <button data-spark-component="button" type="button" class="u-shadow-border-transition box-border inline-flex items-center justify-center gap-md whitespace-nowrap px-lg text-body-1 font-bold focus-visible:outline-none focus-visible:u-ring [&amp;:not(:focus-visible)]:ring-inset min-w-sz-44 h-sz-44 rounded-lg bg-main text-on-main hover:bg-main-hovered enabled:active:bg-main-hovered focus-visible:bg-main-hovered" aria-busy="false" aria-live="off">
                            <svg viewBox="0 0 24 24" data-title="AddSquareOutline" fill="currentColor" stroke="none" class="fill-current shrink-0 text-current w-sz-16 h-sz-16" data-spark-component="icon" aria-hidden="true" focusable="false">
                              <path d="m12,6.84c.56,0,1.01.45,1.01,1.01v3.14h3.14c.56.02.99.5.96,1.05-.02.52-.44.94-.96.96h-3.14v3.14c0,.56-.45,1.01-1.01,1.01-.56,0-1.01-.45-1.01-1.01h0v-3.14h-3.14c-.56,0-1.01-.45-1.01-1.01,0-.56.45-1.01,1.01-1.01h3.14v-3.14c0-.56.45-1.01,1.01-1.01h0Z"></path>
                              <path fill-rule="evenodd" d="m7.16,2c-2.85,0-5.16,2.31-5.16,5.16h0v9.68c0,2.85,2.31,5.16,5.16,5.16h9.68c2.85,0,5.16-2.31,5.16-5.16V7.16c0-2.85-2.31-5.16-5.16-5.16H7.16Zm-3.14,5.16c0-1.73,1.4-3.14,3.14-3.14h9.68c1.73,0,3.14,1.4,3.14,3.14h0v9.68c0,1.73-1.4,3.14-3.14,3.14H7.16c-1.73,0-3.14-1.4-3.14-3.14h0V7.16h0Z"></path></svg>Déposer une annonce
                          </button>
                        </div></a>
                    </div>
                    <p class="mb-md text-headline-1 md:mb-none md:mr-xl lg:mr-lg" style="text-align: center;" id="Articlenull">Aucun article</p>
                    <div v-for="(category, index) in categories" :id="index + 1" :key="index">
                    <div class="mx-auto mb-none mt-xl box-content max-w-page-max px-lg md:px-xl">
                      <h2 class="text-headline-2">{{ category }}</h2>
                      <a class="text-body-2" href="./tout">
                        <div>
                          <span class="mr-md hidden items-center justify-between gap-md font-bold md:flex">
                            Voir plus d’annonces
                            <svg viewBox="0 0 24 24" fill="currentColor" stroke="none" class="fill-current shrink-0 text-current u-current-font-size">
                              <path fill-rule="evenodd" d="m15.46,6.28c-.4.38-.41,1.01-.03,1.4l3.22,3.33H3c-.55,0-1,.44-1,.99s.45.99,1,.99h15.65l-3.22,3.33c-.38.4-.37,1.02.03,1.4.4.38,1.03.37,1.41-.03l4.85-5.01c.37-.38.37-.99,0-1.37l-4.85-5.01c-.38-.4-1.02-.41-1.41-.03Z"></path>
                            </svg>
                          </span>
                          <svg viewBox="0 0 24 24" fill="currentColor" stroke="none" class="fill-current shrink-0 text-current u-current-font-size mr-md md:hidden" aria-label="Voir plus d’annonces">
                            <path fill-rule="evenodd" d="m7.3,2.28c-.38.38-.4,1.02-.03,1.41l7.69,8.31-7.69,8.31c-.37.4-.36,1.03.03,1.41.38.38.99.37,1.36-.03l7.87-8.51c.15-.16.27-.34.35-.54.08-.21.12-.43.12-.65s-.04-.44-.12-.65c-.08-.2-.2-.38-.35-.54L8.66,2.31c-.37-.4-.98-.41-1.36-.03Z"></path>
                          </svg>
                        </div>
                      </a>
                    </div>
                    <div class="product-grid">
                      <div class="product-card" v-for="product in filteredProducts(index + 1)" :key="product.id">
                      <a :href="'./products/' + product.id">
                        <img :src="product.image_url" alt="Image du produit" class="product-image" />
                        <div class="product-details">
                          <p style="padding: 0 0cm 0.2cm 0; border-width: 0px"></p>
                          <h2 class="product-name">{{ product.name }}</h2>
                          <p style="padding: 0 0cm 0.3cm 0; border-width: 0px"></p>
                          <div class="product-prix">
                            <p class="prix">{{ product.prix }} €</p>
                            <span class="rating">Note: {{ product.note }}/5</span>
                          </div>
                          <p style="padding: 0 0cm 0.3cm 0; border-width: 0px"></p>
                        </div>
                      </a>
                      <button @click="addToCart(product)" class="add-to-cart-btn">Ajouter au panier</button>
                      <p style="padding: 0 0cm 0.3cm 0; border-width: 0px"></p>
                    </div>
                    </div>
                  </div>
                  </section>
                </main>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <div v-if="showCart" class="cart-modal">
      <div class="cart-modal-content">
        <h2>Votre Panier</h2>
        <div v-if="cartItems.length > 0">
          <ul>
            <li v-for="item in cartItems" :key="item.id">
              <div class="cart-item">
                <img :src="item.image_url" alt="Produit" class="cart-item-image" />
                <span class="cart-item-name">{{ item.name }}</span>
                <span class="cart-item-quantity">Quantité : {{ item.quantity }}</span>
                <span class="cart-item-prix">{{ (item.prix * item.quantity).toFixed(2) }} €</span>
                <button @click="removeFromCart(item.id)" class="remove-item-btn">Supprimer</button>
              </div>
            </li>
          </ul>
          <div class="cart-total">
            <p>Total : {{ totalprix }} €</p>
          </div>
        </div>
        <div v-else>
          <p>Votre panier est vide.</p>
        </div>
        <button @click="closeCart" class="close-cart-btn">Fermer</button>
      </div>
    </div>
</body>
  </template>
  
<script>
export default {
  name: "ProductList",
  data() {
    return {
      products: [],
      cartItems: [],
      showCart: false,
      categories: [
        "Immobilier",
        "Véhicules",
        "Locations de vacances",
        "Jeux",
        "Mode",
        "Maison & Jardin",
        "Famille",
        "Électronique",
        "Loisirs",
        "Autres"
      ]
    };
  },
  computed: {
    cartItemCount() {
      return this.cartItems.reduce((total, item) => total + item.quantity, 0);
    },
    totalprix() {
      return this.cartItems.reduce((total, item) => total + item.prix * item.quantity, 0).toFixed(2);
    }
  },
  created() {
    this.fetchProducts();
  },
  mounted() {
  },
  methods: {
    async fetchProducts() {
      try {
        const response = await fetch('http://localhost:3000/product', {
          headers: {
            role: 'client'
          }
        });

        if (!response.ok) {
          throw new Error('Erreur de récupération des produits');
        }

        this.products = await response.json();
      } catch (error) {
        console.error('Erreur lors de la récupération des produits:', error);
      }
    },
    addToCart(product) {
      const existingItem = this.cartItems.find(item => item.id === product.id);
      
      if (existingItem) {
        if (existingItem.quantity < 5) {
          existingItem.quantity += 1;
        } else {
          alert('La quantité maximale pour cet article est de 5');
        }
      } else {
        this.cartItems.push({ ...product, quantity: 1 });
      }
    },
    removeFromCart(productId) {
      this.cartItems = this.cartItems.filter(item => item.id !== productId);
    },
    goToCart() {
      this.showCart = true;
    },
    closeCart() {
      this.showCart = false;
    },
    filteredProducts(categoryId) {
      return this.products.filter(product => product.category_id === categoryId);
    }
  }
};
</script>

